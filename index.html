<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShopWave</title>
<style>
/* ---------- Base styles (unchanged structure) ---------- */
body {
  margin: 0;
  font-family: Poppins, sans-serif;
  background: #f5f5f5;
}

/* simple reset for anchor/list visuals */
ul { list-style: none; padding: 0; margin: 0; }

/* ===== NAVBAR (top) ===== */
nav {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #111;
  color: #fff;
  padding: 10px 20px;
}
nav .menu-btn, nav .cart-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 6px;
}
nav .menu-btn img, nav .cart-btn img {
  width: 25px;
  height: 25px;
}
nav h1 {
  margin: 0;
  font-size: 22px;
}

/* ===== SIDEBAR ===== */
.sidebar {
  position: fixed;
  top: 0;
  left: -260px;            /* hidden by default */
  width: 250px;
  height: 100%;
  background: #222;
  color: #fff;
  overflow-y: auto;
  transition: left 0.3s ease;
  padding: 20px;
  z-index: 1000;
}
.sidebar h2 {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 20px;
  margin: 0 0 12px 0;
}
.sidebar img { width: 20px; cursor: pointer; }
.sidebar ul { margin-top: 12px; }
.sidebar li { padding: 8px 0; cursor: pointer; }
.sidebar li:hover { color: #0ff; }

/* visible state */
.sidebar.show { left: 0; }

/* ===== MAIN / PRODUCTS ===== */
/* main is the wrapper we will shift when sidebar opens */
main {
  padding: 20px;
  transition: transform 0.3s ease; /* smooth slide */
}

/* Shift the entire main content when body has the class sidebar-open */
body.sidebar-open main {
  transform: translateX(250px); /* same as sidebar width */
}

/* product grid */
.products {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}
.product {
  background: #fff;
  border-radius: 10px;
  padding: 10px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.08);
  text-align: center;
  transition: transform 0.15s;
}
.product:hover { transform: scale(1.03); }
.product img { width: 100%; height: 160px; object-fit: cover; border-radius: 6px; }
.product h3 { margin: 10px 0 6px; }
.product p { color: #555; font-size: 14px; }
.product .price { font-weight: bold; margin-top: 6px; }
.product button { margin-top: 8px; background: #111; color: #fff; border: none; padding: 8px 12px; border-radius: 5px; cursor: pointer; }

/* ===== CART MODAL ===== */
#cartModal {
  display: none;
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.5);
  align-items: center; justify-content: center;
  z-index: 1001;
}
#cartModal.show { display: flex; }
.modal-content {
  background: #fff;
  width: 420px;
  max-width: 94%;
  padding: 20px;
  border-radius: 10px;
  position: relative;
}
.close-btn { position: absolute; right: 12px; top: 8px; font-size: 20px; cursor: pointer; color: #666; }

/* cart items */
.cart-item { display:flex; gap:10px; align-items:center; margin-bottom: 10px; }
.cart-item img { width: 50px; height: 50px; object-fit: cover; border-radius: 6px; }
.muted { color:#777; font-size:13px; }
.qty-controls { display:flex; align-items:center; gap:6px; }
.btn { background:#111; color:#fff; border:none; padding:4px 8px; border-radius:4px; cursor:pointer; }
.btn.grey { background:#ddd; color:#000; }

/* empty cart */
.cart-empty { text-align:center; color:#777; padding:12px; }

/* checkout form small styling */
form { margin-top: 12px; display:flex; flex-direction:column; gap:8px; }
input, button[type="submit"] { padding:8px; border-radius:6px; border:1px solid #ccc; }
button[type="submit"] { background:#111; color:#fff; border:none; cursor:pointer; }

/* toast */
.toast {
  position: fixed;
  bottom: 16px;
  right: 16px;
  background:#111; color:#fff; padding:10px 14px; border-radius:6px; opacity:0; transform: translateY(8px);
  transition: all 0.2s;
  z-index: 2000;
}
.toast.show { opacity:1; transform: translateY(0); }
</style>
</head>
<body>

<nav>
  <button class="menu-btn"><img src="images/menu.png" alt="Menu"></button>
  <h1>ShopWave</h1>
  <button class="cart-btn"><img src="images/cart.png" alt="Cart"></button>
</nav>

<div class="sidebar" id="sidebar">
  <h2>Categories <img src="images/arrow.png" id="closeSidebar" alt="Close"></h2>
  <ul>
    <li data-cat="All">All Products</li>
    <li data-cat="Clothing">Clothing</li>
    <li data-cat="Accessories">Accessories</li>
    <li data-cat="Sports">Sports</li>
    <li data-cat="Outdoor">Outdoor</li>
  </ul>
</div>

<main>
  <div class="products" id="productGrid"></div>
</main>

<div id="cartModal">
  <div class="modal-content">
    <span class="close-btn" id="closeCart">&times;</span>
    <h2>Your Cart</h2>
    <div id="cartContent"></div>
    <p id="totals"></p>
    <form id="checkoutForm">
      <input type="text" name="name" placeholder="Name" required>
      <input type="email" name="email" placeholder="Email" required>
      <button type="submit">Checkout</button>
      <p id="status"></p>
    </form>
  </div>
</div>

<div class="toast" id="toast">Added to cart!</div>

<script>
// ===== PRODUCTS =====
const PRODUCTS = [
  {id:1, name:"Classic Tee", price:19.99, img:"images/product1.jpeg", desc:"Cotton tee, unisex."},
  {id:2, name:"Denim Jacket", price:59.99, img:"images/product2.jpeg", desc:"Stylish denim jacket."},
  {id:3, name:"Casual Sneakers", price:39.99, img:"images/product3.jpeg", desc:"Comfortable sneakers."},
  {id:4, name:"Leather Belt", price:25.99, img:"images/product4.jpeg", desc:"Genuine leather belt."},
  {id:5, name:"Bike Gloves", price:15.99, img:"images/product5.jpeg", desc:"Durable gloves for bikers."},
  {id:6, name:"Bike Mask", price:9.99, img:"images/product6.jpeg", desc:"Breathable face mask."},
  {id:7, name:"Bike Helmet", price:45.99, img:"images/product7.jpeg", desc:"Safety-certified helmet."},
  {id:8, name:"Body Armor", price:89.99, img:"images/product8.jpeg", desc:"Protective bike body armor."}
];

// ===== RENDER PRODUCTS =====
function renderProducts(){
  const grid = document.getElementById("productGrid");
  grid.innerHTML = "";
  PRODUCTS.forEach(p=>{
    const card = document.createElement("div");
    card.className = "product";
    card.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.desc}</p>
      <div class="price">BDT ${p.price}</div>
      <button onclick="addToCart(${p.id})">Add to Cart</button>
    `;
    grid.appendChild(card);
  });
}

// ===== CART STORAGE & TOAST =====
let cart = JSON.parse(localStorage.getItem("cart")||"[]");
function saveCart(){ localStorage.setItem("cart", JSON.stringify(cart)); }
function showToast(msg){
  const t = document.getElementById("toast");
  t.textContent = msg;
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"), 2000);
}

// ===== CART ACTIONS (kept exactly as you provided) =====
function addToCart(id){ 
  let item = cart.find(i => i.id === id); 
  if(item){ item.qty++; } else { cart.push({id, qty:1}); } 
  saveCart(); renderCart(id); showToast("Added to cart!"); 
}

function renderCart(highlightId){
  const el=document.getElementById("cartContent"); el.innerHTML="";
  if(cart.length===0){ el.innerHTML="<p class='cart-empty'>Cart is empty ðŸ›’</p>"; document.getElementById("totals").textContent=""; return; }
  cart.forEach(it=>{
    const p=PRODUCTS.find(x=>x.id===it.id);
    const div=document.createElement("div"); div.className="cart-item";
    if(highlightId && it.id===highlightId){ div.classList.add("added"); setTimeout(()=>div.classList.remove("added"),600);}
    div.innerHTML=`
      <img src="${p.img}" alt="${p.name}">
      <div style="flex:1">
        <b>${p.name}</b>
        <div class="muted">BDT ${p.price} Ã— ${it.qty} = BDT ${(p.price*it.qty).toFixed(2)}</div>
      </div>
      <div class="qty-controls">
        <button class="btn grey">-</button>
        <input type="number" value="${it.qty}" min="1">
        <button class="btn">+</button>
      </div>
      <button class="btn grey remove-btn">Remove</button>
    `;
    div.querySelector(".qty-controls input").addEventListener("change", e=>updateQty(p.id,e.target.value));
    div.querySelector(".qty-controls .btn:first-child").addEventListener("click", ()=>updateQty(p.id,it.qty-1));
    div.querySelector(".qty-controls .btn:last-child").addEventListener("click", ()=>updateQty(p.id,it.qty+1));
    div.querySelector(".remove-btn").addEventListener("click", ()=>removeItem(p.id));
    el.appendChild(div);
  });
  document.getElementById("totals").textContent="Total: BDT "+cart.reduce((s,it)=>s+PRODUCTS.find(p=>p.id===it.id).price*it.qty,0).toFixed(2);
}

function updateQty(id,val){ let it=cart.find(i=>i.id===id); if(it){ it.qty=Math.max(1,Number(val)); saveCart(); renderCart(); } }
function removeItem(id){ cart=cart.filter(i=>i.id!==id); saveCart(); renderCart(); }

// ===== CHECKOUT (kept same) =====
document.getElementById("checkoutForm").addEventListener("submit", e=>{
  e.preventDefault();
  if(cart.length===0){ showToast("Cart is empty!"); return; }
  const fd=new FormData(e.target);
  const order={id:"ORD-"+Date.now(), customer:Object.fromEntries(fd.entries()), items:cart.map(i=>{let p=PRODUCTS.find(x=>x.id===i.id); return {...p, qty:i.qty, subtotal:p.price*i.qty}; }), total:cart.reduce((s,i)=>s+PRODUCTS.find(p=>p.id===i.id).price*i.qty,0)};
  const blob=new Blob([JSON.stringify(order,null,2)],{type:"application/json"});
  const a=document.createElement("a"); a.href=URL.createObjectURL(blob); a.download=order.id+".json"; a.click();
  cart=[]; saveCart(); renderCart(); e.target.reset();
  document.getElementById("status").textContent="Order placed!";
});

// ===== EVENTS: sidebar open/close + cart modal =====
// NOTE: we toggle body.sidebar-open to shift main consistently
const menuBtn = document.querySelector(".menu-btn");
const sidebar = document.getElementById("sidebar");
const closeSidebar = document.getElementById("closeSidebar");

menuBtn.addEventListener("click", () => {
  const isOpen = sidebar.classList.toggle("show");
  // add/remove body class to shift main content (reliable on all layouts)
  document.body.classList.toggle("sidebar-open", isOpen);
});
closeSidebar.addEventListener("click", () => {
  sidebar.classList.remove("show");
  document.body.classList.remove("sidebar-open");
});

// cart modal open/close
document.querySelector(".cart-btn").addEventListener("click", ()=>{ document.getElementById("cartModal").classList.add("show"); renderCart(); });
document.getElementById("closeCart").addEventListener("click", ()=>{ document.getElementById("cartModal").classList.remove("show"); });

window.addEventListener("keydown", e => {
  if(e.key === "Escape"){
    document.getElementById("cartModal").classList.remove("show");
    sidebar.classList.remove("show");
    document.body.classList.remove("sidebar-open");
  }
});

// initialize
renderProducts();
renderCart();
</script>
</body>
</html>
