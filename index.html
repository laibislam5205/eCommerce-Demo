<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ShopWave</title>

<style>
body {
  font-family: "Poppins", sans-serif;
  margin: 0;
  background: #f4f4f4;
  color: #333;
}
header {
  background: #222;
  color: white;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: relative;
  z-index: 100;
}
header h2 { margin: 0; font-size: 22px; }

/* Sidebar */
.menu-toggle {
  width: 30px;
  height: 25px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  cursor: pointer;
}
.menu-toggle span {
  height: 3px;
  background: white;
  border-radius: 3px;
  transition: 0.3s;
}
.menu-toggle.active span:nth-child(1) {
  transform: rotate(45deg) translateY(8px);
}
.menu-toggle.active span:nth-child(2) {
  opacity: 0;
}
.menu-toggle.active span:nth-child(3) {
  transform: rotate(-45deg) translateY(-8px);
}
.sidebar {
  position: fixed;
  top: 0;
  left: -250px;
  width: 220px;
  height: 100vh;
  background: #111;
  color: white;
  padding-top: 80px;
  transition: 0.4s;
  display: flex;
  flex-direction: column;
  gap: 15px;
  padding-left: 20px;
  box-shadow: 3px 0 6px rgba(0,0,0,0.3);
  z-index: 99;
}
.sidebar.show { left: 0; }
.sidebar a {
  color: white;
  text-decoration: none;
  font-size: 16px;
  transition: 0.3s;
}
.sidebar a:hover { color: #0ff; }

/* Cart Button */
#cart-btn {
  background: transparent;
  border: none;
  cursor: pointer;
  position: relative;
}
#cart-btn img { width: 30px; height: 30px; }
#cart-count {
  position: absolute;
  top: -6px;
  right: -6px;
  background: red;
  color: white;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 12px;
}

/* Product Grid */
#products {
  display: grid;
  grid-template-columns: repeat(auto-fit,minmax(220px,1fr));
  gap: 15px;
  padding: 20px;
}
.card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  overflow: hidden;
  transition: transform 0.3s;
}
.card:hover { transform: scale(1.03); }
.card img { width: 100%; height: 180px; object-fit: cover; }
.card h3 { margin: 10px; font-size: 18px; }
.card .muted { color: gray; margin: 0 10px 10px; font-size: 14px; }
.card .price { margin: 0 10px 10px; font-weight: bold; }
.card button {
  margin: 0 10px 15px;
  padding: 8px 12px;
  background: #111;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.card button:hover { background: #333; }

/* Cart Modal */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 200;
}
.modal.show { display: flex; }
.modal-content {
  background: white;
  width: 95%;
  max-width: 700px;
  padding: 20px;
  border-radius: 10px;
  max-height: 90vh;
  overflow-y: auto;
}
.cart-item {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 15px;
}
.cart-item img {
  width: 60px;
  height: 60px;
  border-radius: 6px;
  object-fit: cover;
}
.cart-item .muted { font-size: 14px; color: gray; }
.cart-empty { text-align: center; padding: 20px; font-size: 16px; }
.qty-controls { display: flex; gap: 5px; align-items: center; }
.qty-controls button {
  padding: 4px 8px;
  border: none;
  background: #ddd;
  cursor: pointer;
  border-radius: 4px;
}
.qty-controls input {
  width: 40px;
  text-align: center;
}
.remove-btn {
  background: crimson !important;
  color: white;
  padding: 5px 8px;
  border-radius: 6px;
  cursor: pointer;
  border: none;
}
.btn.grey { background: #ddd; color: black; }
#closeCart {
  background: #333;
  color: white;
  border: none;
  padding: 6px 12px;
  float: right;
  cursor: pointer;
  border-radius: 6px;
}

/* Checkout Form */
form { margin-top: 20px; display: flex; flex-direction: column; gap: 10px; }
input, textarea { padding: 8px; border: 1px solid #ccc; border-radius: 6px; }
button[type="submit"] {
  background: #111;
  color: white;
  border: none;
  padding: 10px;
  border-radius: 6px;
  cursor: pointer;
}
#status { color: green; margin-top: 10px; }

/* Toast */
.toast {
  position: fixed;
  bottom: 25px;
  right: 25px;
  background: #333;
  color: white;
  padding: 10px 16px;
  border-radius: 6px;
  opacity: 0;
  transform: translateY(20px);
  transition: 0.3s;
  z-index: 300;
}
.toast.show { opacity: 1; transform: translateY(0); }
</style>
</head>

<body>

<header>
  <div class="menu-toggle" id="menu-toggle"><span></span><span></span><span></span></div>
  <h2>ShopWave</h2>
  <button id="cart-btn">
    <img src="https://cdn-icons-png.flaticon.com/512/263/263142.png" alt="Cart">
    <span id="cart-count">0</span>
  </button>
</header>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <a href="#" data-cat="All">All Products</a>
  <a href="#" data-cat="Clothing">Clothing</a>
  <a href="#" data-cat="Accessories">Accessories</a>
  <a href="#" data-cat="Gear">Gear</a>
</div>

<!-- Products -->
<main id="products"></main>

<!-- CART MODAL -->
<div class="modal" id="cartModal">
  <div class="modal-content">
    <button id="closeCart">Close</button>
    <h3>ðŸ›’ Your Cart</h3>
    <div id="cartContent"></div>
    <h4 id="totals"></h4>

    <form id="checkoutForm">
      <input type="text" name="name" placeholder="Full Name" required>
      <input type="email" name="email" placeholder="Email" required>
      <textarea name="address" placeholder="Shipping Address" required></textarea>
      <button type="submit">Checkout</button>
      <p id="status"></p>
    </form>
  </div>
</div>

<script>
// ===== Sidebar Toggle =====
const toggleBtn = document.getElementById("menu-toggle");
const sidebar = document.getElementById("sidebar");
toggleBtn.addEventListener("click", () => {
  toggleBtn.classList.toggle("active");
  sidebar.classList.toggle("show");
});

// ===== Products =====
const PRODUCTS = [
  {id:1,name:"Classic Tee",price:1999,img:"images/product1.jpeg",desc:"Cotton tee, unisex."},
  {id:2,name:"Denim Jacket",price:4999,img:"images/product2.jpeg",desc:"Stylish denim jacket."},
  {id:3,name:"Casual Sneakers",price:3999,img:"images/product3.jpeg",desc:"Comfortable daily wear sneakers."},
  {id:4,name:"Leather Wallet",price:1499,img:"images/product4.jpeg",desc:"Genuine leather wallet."},
  {id:5,name:"Wrist Watch",price:6999,img:"images/product5.jpeg",desc:"Elegant wrist watch."},
  {id:6,name:"Bike Gloves",price:1999,img:"images/product6.jpeg",desc:"Durable biker gloves."},
  {id:7,name:"Bike Helmet",price:4999,img:"images/product7.jpeg",desc:"Full-face helmet."},
  {id:8,name:"Bike Body Armor",price:9999,img:"images/product8.jpeg",desc:"Full body biker armor."},
  {id:9,name:"Power Bank",price:2999,img:"images/product9.jpeg",desc:"Fast charging power bank."},
  {id:10,name:"Phone Case",price:799,img:"images/product10.jpeg",desc:"Protective phone case."}
];

let cart = JSON.parse(localStorage.getItem("shopCart")||"[]");
function saveCart(){localStorage.setItem("shopCart",JSON.stringify(cart));updateCartCount();}
function updateCartCount(){document.getElementById("cart-count").textContent=cart.reduce((s,i)=>s+i.qty,0);}
function showToast(msg){const t=document.createElement("div");t.className="toast";t.textContent=msg;document.body.appendChild(t);setTimeout(()=>t.classList.add("show"),10);setTimeout(()=>{t.classList.remove("show");setTimeout(()=>t.remove(),300)},2000);}

/* ===== Product Rendering ===== */
function renderProducts(cat="All"){
  const list=document.getElementById("products"); list.innerHTML="";
  PRODUCTS.filter(p=>{
    if(cat==="All")return true;
    if(cat==="Clothing")return ["Classic Tee","Denim Jacket"].includes(p.name);
    if(cat==="Accessories")return ["Leather Wallet","Wrist Watch","Power Bank","Phone Case"].includes(p.name);
    if(cat==="Gear")return ["Bike Gloves","Bike Helmet","Bike Body Armor","Casual Sneakers"].includes(p.name);
  }).forEach(p=>{
    const div=document.createElement("div"); div.className="card";
    div.innerHTML=`
      <img src="${p.img}" alt="${p.name}">
      <h3>${p.name}</h3>
      <div class="muted">${p.desc}</div>
      <div class="price">BDT ${p.price}</div>
      <button>Add to Cart</button>
    `;
    div.querySelector("button").onclick=()=>addToCart(p.id);
    list.appendChild(div);
  });
}
document.querySelectorAll(".sidebar a").forEach(a=>a.onclick=e=>{
  e.preventDefault(); renderProducts(a.dataset.cat); sidebar.classList.remove("show"); toggleBtn.classList.remove("active");
});

// ===== Cart Actions =====
function addToCart(id){ 
  let item=cart.find(i=>i.id===id); 
  if(item){ item.qty++; } else { cart.push({id,qty:1}); } 
  saveCart(); renderCart(id); showToast("Added to cart!"); 
}

function renderCart(highlightId){
  const el=document.getElementById("cartContent"); el.innerHTML="";
  if(cart.length===0){ el.innerHTML="<p class='cart-empty'>Cart is empty ðŸ›’</p>"; document.getElementById("totals").textContent=""; return; }
  cart.forEach(it=>{
    const p=PRODUCTS.find(x=>x.id===it.id);
    const div=document.createElement("div"); div.className="cart-item";
    if(highlightId && it.id===highlightId){ div.classList.add("added"); setTimeout(()=>div.classList.remove("added"),600);}
    div.innerHTML=`
      <img src="${p.img}" alt="${p.name}">
      <div style="flex:1">
        <b>${p.name}</b>
        <div class="muted">BDT ${p.price} Ã— ${it.qty} = BDT ${(p.price*it.qty).toFixed(2)}</div>
      </div>
      <div class="qty-controls">
        <button class="btn grey">-</button>
        <input type="number" value="${it.qty}" min="1">
        <button class="btn">+</button>
      </div>
      <button class="btn grey remove-btn">Remove</button>
    `;
    div.querySelector(".qty-controls input").addEventListener("change", e=>updateQty(p.id,e.target.value));
    div.querySelector(".qty-controls .btn:first-child").addEventListener("click", ()=>updateQty(p.id,it.qty-1));
    div.querySelector(".qty-controls .btn:last-child").addEventListener("click", ()=>updateQty(p.id,it.qty+1));
    div.querySelector(".remove-btn").addEventListener("click", ()=>removeItem(p.id));
    el.appendChild(div);
  });
  document.getElementById("totals").textContent="Total: BDT "+cart.reduce((s,it)=>s+PRODUCTS.find(p=>p.id===it.id).price*it.qty,0).toFixed(2);
}

function updateQty(id,val){ let it=cart.find(i=>i.id===id); if(it){ it.qty=Math.max(1,Number(val)); saveCart(); renderCart(); } }
function removeItem(id){ cart=cart.filter(i=>i.id!==id); saveCart(); renderCart(); }

// ===== Checkout =====
document.getElementById("checkoutForm").addEventListener("submit", e=>{
  e.preventDefault();
  if(cart.length===0){ showToast("Cart is empty!"); return; }
  const fd=new FormData(e.target);
  const order={id:"ORD-"+Date.now(), customer:Object.fromEntries(fd.entries()), items:cart.map(i=>{let p=PRODUCTS.find(x=>x.id===i.id); return {...p, qty:i.qty, subtotal:p.price*i.qty}; }), total:cart.reduce((s,i)=>s+PRODUCTS.find(p=>p.id===i.id).price*i.qty,0)};
  const blob=new Blob([JSON.stringify(order,null,2)],{type:"application/json"});
  const a=document.createElement("a"); a.href=URL.createObjectURL(blob); a.download=order.id+".json"; a.click();
  cart=[]; saveCart(); renderCart(); e.target.reset();
  document.getElementById("status").textContent="Order placed!";
});

// ===== Modal =====
const modal=document.getElementById("cartModal");
document.getElementById("cart-btn").onclick=()=>{ renderCart(); modal.classList.add("show"); }
document.getElementById("closeCart").onclick=()=>modal.classList.remove("show");
modal.addEventListener("click",e=>{ if(e.target===modal) modal.classList.remove("show"); });
document.addEventListener("keydown",e=>{ if(e.key==="Escape") modal.classList.remove("show"); });

// ===== Init =====
renderProducts(); updateCartCount();
</script>
</body>
</html>
